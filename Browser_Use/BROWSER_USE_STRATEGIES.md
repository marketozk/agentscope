# üéØ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–±–æ—Ç—ã —Å Browser-Use: –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ë–∞–∑–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è](#–±–∞–∑–æ–≤—ã–µ-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
2. [–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã](#–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ-–ø–∞—Ç—Ç–µ—Ä–Ω—ã)
3. [–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏-–æ–±—Ä–∞–±–æ—Ç–∫–∏-–¥–∞–Ω–Ω—ã—Ö)
4. [–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏](#—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏-—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏)
5. [–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏](#—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
6. [–í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏](#–≤—ã–±–æ—Ä-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏)
7. [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞](#–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–¥–∞)

---

## üöÄ –ë–∞–∑–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 1. Single Prompt (–ï–¥–∏–Ω—ã–π –ø—Ä–æ–º–ø—Ç)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í—Å—è –∑–∞–¥–∞—á–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ –ü—Ä–æ—Å—Ç—ã–µ –ª–∏–Ω–µ–π–Ω—ã–µ –∑–∞–¥–∞—á–∏
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- ‚úÖ –ó–∞–¥–∞—á–∞ –ø–æ–Ω—è—Ç–Ω–∞ –∏ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–∞
- ‚úÖ –ú–∏–Ω–∏–º—É–º API –≤—ã–∑–æ–≤–æ–≤

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
- –ë—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º–∏ —à–∞–≥–∞–º–∏
- –°–ª–æ–∂–Ω–æ –æ—Ç–ª–∞–¥–∏—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö workflow

```python
agent = Agent(
    task="–û—Ç–∫—Ä–æ–π yandex.ru, –Ω–∞–π–¥–∏ '–ø–æ–≥–æ–¥–∞', –æ—Ç–∫—Ä–æ–π –ø–µ—Ä–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç",
    llm=llm
)
result = await agent.run()
```

### 2. Step-by-Step (–ü–æ—à–∞–≥–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–¥–∞—á–∞ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —à–∞–≥–∏.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ –°–ª–æ–∂–Ω—ã–µ –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–µ –∑–∞–¥–∞—á–∏
- ‚úÖ –ù—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∫–∞–∂–¥—ã–º —à–∞–≥–æ–º
- ‚úÖ –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –º–µ–∂–¥—É —à–∞–≥–∞–º–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º
- –õ–µ–≥—á–µ –æ—Ç–ª–∞–¥–∏—Ç—å
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É
- –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ë–æ–ª—å—à–µ API –≤—ã–∑–æ–≤–æ–≤
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- –°–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

```python
# ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: execute_task() –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢ –≤ browser-use!
# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞:

# –®–∞–≥ 1
agent1 = Agent(task="–û—Ç–∫—Ä–æ–π yandex.ru –∏ –¥–æ–∂–¥–∏—Å—å –∑–∞–≥—Ä—É–∑–∫–∏", llm=llm)
await agent1.run()

# –®–∞–≥ 2
agent2 = Agent(task="–ù–∞–π–¥–∏ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –∏ –≤–≤–µ–¥–∏ '–ø–æ–≥–æ–¥–∞'", llm=llm)
await agent2.run()

# –®–∞–≥ 3
agent3 = Agent(task="–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –ø–æ–∏—Å–∫–∞ –∏ –æ—Ç–∫—Ä–æ–π –ø–µ—Ä–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç", llm=llm)
result = await agent3.run()
```

### 3. Hybrid (–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –µ–¥–∏–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ –ì—Ä—É–ø–ø—ã —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
- ‚úÖ –†–∞–∑–Ω—ã–µ —Ñ–∞–∑—ã –∑–∞–¥–∞—á–∏

```python
# –§–∞–∑–∞ 1: –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–µ–¥–∏–Ω—ã–π –ø—Ä–æ–º–ø—Ç)
task1 = """
1. –û—Ç–∫—Ä–æ–π —Å–∞–π—Ç example.com
2. –ù–∞–π–¥–∏ —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
3. –í–≤–µ–¥–∏ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å
4. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞
"""
agent1 = Agent(task=task1, llm=llm)
await agent1.run()

# –§–∞–∑–∞ 2: –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ (–æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã)
for item in items:
    task = f"""
    1. –ù–∞–π–¥–∏ —ç–ª–µ–º–µ–Ω—Ç {item}
    2. –û–±—Ä–∞–±–æ—Ç–∞–π –µ–≥–æ
    3. –°–æ—Ö—Ä–∞–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    """
    agent = Agent(task=task, llm=llm)
    await agent.run()
```
```

---

## üîß –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### 4. Pipeline Pattern (–ö–æ–Ω–≤–µ–π–µ—Ä)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –ø–µ—Ä–µ–¥–∞—á–µ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

```python
class BrowserPipeline:
    def __init__(self, llm):
        self.stages = []
        self.llm = llm
    
    def add_stage(self, name, task):
        self.stages.append((name, task))
    
    async def run(self):
        results = {}
        context = ""
        
        for name, task in self.stages:
            agent = Agent(
                task=f"{context}\\n{task}",
                llm=self.llm
            )
            result = await agent.run()
            results[name] = result
            context = f"–ü—Ä–µ–¥—ã–¥—É—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {result}"
        
        return results

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
pipeline = BrowserPipeline(llm)
pipeline.add_stage("search", "–ù–∞–π–¥–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–¥—É–∫—Ç–µ")
pipeline.add_stage("compare", "–°—Ä–∞–≤–Ω–∏ —Ü–µ–Ω—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–∞–π—Ç–∞—Ö")
pipeline.add_stage("report", "–°–æ–∑–¥–∞–π –æ—Ç—á–µ—Ç –æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º")
```

### 5. Parallel Execution (–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∑–∞–¥–∞—á.

```python
async def parallel_search(queries, llm):
    tasks = []
    
    for query in queries:
        agent = Agent(
            task=f"–ù–∞–π–¥–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ {query}",
            llm=llm
        )
        tasks.append(agent.run())
    
    results = await asyncio.gather(*tasks)
    return dict(zip(queries, results))

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
results = await parallel_search(
    ["Python", "JavaScript", "Rust"],
    llm
)
```

### 6. State Machine Pattern (–ö–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã–º–∏ workflow —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏.

```python
class BrowserStateMachine:
    def __init__(self, llm):
        self.llm = llm
        self.state = "START"
        self.data = {}
    
    async def transition(self, action):
        transitions = {
            ("START", "login"): self.handle_login,
            ("LOGGED_IN", "search"): self.handle_search,
            ("SEARCH_DONE", "extract"): self.handle_extract,
            ("EXTRACTED", "save"): self.handle_save
        }
        
        handler = transitions.get((self.state, action))
        if handler:
            await handler()
        else:
            raise ValueError(f"Invalid transition: {self.state} -> {action}")
    
    async def handle_login(self):
        agent = Agent(task="–ê–≤—Ç–æ—Ä–∏–∑—É–π—Å—è –Ω–∞ —Å–∞–π—Ç–µ", llm=self.llm)
        await agent.run()
        self.state = "LOGGED_IN"
```

### 7. Observer Pattern (–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

```python
class PageMonitor:
    def __init__(self, llm, check_interval=5):
        self.llm = llm
        self.check_interval = check_interval
        self.observers = []
    
    def attach(self, observer):
        self.observers.append(observer)
    
    async def monitor(self, url, condition):
        while True:
            # –°–æ–∑–¥–∞–µ–º –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
            check_task = f"""
            1. –û—Ç–∫—Ä–æ–π {url}
            2. –ü—Ä–æ–≤–µ—Ä—å —É—Å–ª–æ–≤–∏–µ: {condition}
            3. –ï—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ, –≤–µ—Ä–Ω–∏ "CONDITION_MET"
            4. –ò–Ω–∞—á–µ –≤–µ—Ä–Ω–∏ "NO_CHANGE"
            """
            agent = Agent(task=check_task, llm=self.llm)
            result = await agent.run()
            
            if "CONDITION_MET" in str(result).upper():
                for observer in self.observers:
                    await observer.notify(result)
            
            await asyncio.sleep(self.check_interval)
```

---

## üìä –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 8. Extraction Strategy (–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**

```python
# 1. –ü—Ä–æ—Å—Ç–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ
async def simple_extract(url, selectors):
    task = f"–û—Ç–∫—Ä–æ–π {url} –∏ –∏–∑–≤–ª–µ–∫–∏: {', '.join(selectors)}"
    return await agent.run()

# 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ
async def structured_extract(url, schema):
    task = f"""
    –û—Ç–∫—Ä–æ–π {url} –∏ –∏–∑–≤–ª–µ–∫–∏ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
    {json.dumps(schema, indent=2, ensure_ascii=False)}
    """
    return await agent.run()

# 3. –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ
async def iterative_extract(url, item_selector, fields):
    results = []
    
    # –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    count_task = f"""
    1. –û—Ç–∫—Ä–æ–π {url}
    2. –ù–∞–π–¥–∏ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã {item_selector}
    3. –í–µ—Ä–Ω–∏ –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (—Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ)
    """
    agent = Agent(task=count_task, llm=llm)
    count_result = await agent.run()
    count = int(str(count_result).strip())
    
    # –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
    for i in range(count):
        extract_task = f"""
        1. –ù–∞–π–¥–∏ —ç–ª–µ–º–µ–Ω—Ç {item_selector} –Ω–æ–º–µ—Ä {i+1}
        2. –ò–∑–≤–ª–µ–∫–∏ –∏–∑ –Ω–µ–≥–æ –ø–æ–ª—è: {', '.join(fields)}
        3. –í–µ—Ä–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
        """
        agent = Agent(task=extract_task, llm=llm)
        item_data = await agent.run()
        results.append(item_data)
    
    return results
```

### 9. Validation Strategy (–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)

```python
class DataValidator:
    def __init__(self, llm):
        self.llm = llm
        self.rules = {}
    
    def add_rule(self, field, rule):
        self.rules[field] = rule
    
    async def validate(self, data):
        errors = []
        
        for field, rule in self.rules.items():
            if field in data:
                validate_task = f"""
                –ü—Ä–æ–≤–µ—Ä—å –∑–Ω–∞—á–µ–Ω–∏–µ '{data[field]}' –¥–ª—è –ø–æ–ª—è '{field}'
                –ü—Ä–∞–≤–∏–ª–æ: {rule}
                –í–µ—Ä–Ω–∏ "VALID" –µ—Å–ª–∏ –≤–∞–ª–∏–¥–Ω–æ, –∏–Ω–∞—á–µ –æ–ø–∏—à–∏ –æ—à–∏–±–∫—É
                """
                agent = Agent(task=validate_task, llm=self.llm)
                result = await agent.run()
                
                if "VALID" not in str(result).upper():
                    errors.append({
                        "field": field,
                        "error": str(result)
                    })
                    f"–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ '{data[field]}' {rule}"
                )
                if "–Ω–µ" in is_valid.lower():
                    errors.append(f"{field}: {is_valid}")
        
        return errors

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
validator = DataValidator(llm)
validator.add_rule("email", "—è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º email –∞–¥—Ä–µ—Å–æ–º")
validator.add_rule("phone", "—Å–æ–¥–µ—Ä–∂–∏—Ç 10 —Ü–∏—Ñ—Ä")
```

---

## üõ°Ô∏è –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

### 10. Retry Strategy (–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏)

```python
async def retry_with_backoff(task, max_retries=3, base_delay=2):
    for attempt in range(max_retries):
        try:
            agent = Agent(task=task, llm=llm)
            return await agent.run()
        except Exception as e:
            if attempt == max_retries - 1:
                raise
            
            delay = base_delay * (2 ** attempt)
            print(f"–ü–æ–ø—ã—Ç–∫–∞ {attempt + 1} –Ω–µ—É–¥–∞—á–Ω–∞, –æ–∂–∏–¥–∞–Ω–∏–µ {delay}—Å...")
            await asyncio.sleep(delay)
```

### 11. Fallback Strategy (–ó–∞–ø–∞—Å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã)

```python
async def multi_source_search(query):
    sources = [
        ("yandex.ru", f"–ù–∞–π–¥–∏ '{query}' –Ω–∞ –Ø–Ω–¥–µ–∫—Å–µ"),
        ("google.com", f"–ù–∞–π–¥–∏ '{query}' –≤ Google"),
        ("duckduckgo.com", f"–ù–∞–π–¥–∏ '{query}' –≤ DuckDuckGo")
    ]
    
    for source, task in sources:
        try:
            agent = Agent(task=task, llm=llm)
            result = await agent.run()
            if result and "–Ω–µ –Ω–∞–π–¥–µ–Ω–æ" not in result.lower():
                return {"source": source, "result": result}
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ —Å {source}: {e}")
            continue
    
    return None
```

### 12. Circuit Breaker (–ü—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å)

```python
class CircuitBreaker:
    def __init__(self, failure_threshold=5, recovery_timeout=60):
        self.failure_count = 0
        self.failure_threshold = failure_threshold
        self.recovery_timeout = recovery_timeout
        self.last_failure_time = None
        self.state = "CLOSED"  # CLOSED, OPEN, HALF_OPEN
    
    async def call(self, task, llm):
        if self.state == "OPEN":
            if time.time() - self.last_failure_time > self.recovery_timeout:
                self.state = "HALF_OPEN"
            else:
                raise Exception("Circuit breaker is OPEN")
        
        try:
            agent = Agent(task=task, llm=llm)
            result = await agent.run()
            
            if self.state == "HALF_OPEN":
                self.state = "CLOSED"
                self.failure_count = 0
            
            return result
            
        except Exception as e:
            self.failure_count += 1
            self.last_failure_time = time.time()
            
            if self.failure_count >= self.failure_threshold:
                self.state = "OPEN"
            
            raise
```

---

## ‚ö° –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 13. Caching Strategy (–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)

```python
class BrowserCache:
    def __init__(self, ttl=3600):
        self.cache = {}
        self.ttl = ttl
    
    def get_key(self, task):
        return hashlib.md5(task.encode()).hexdigest()
    
    async def execute(self, task, llm):
        key = self.get_key(task)
        
        if key in self.cache:
            timestamp, result = self.cache[key]
            if time.time() - timestamp < self.ttl:
                print(f"Cache hit for: {task[:50]}...")
                return result
        
        agent = Agent(task=task, llm=llm)
        result = await agent.run()
        self.cache[key] = (time.time(), result)
        
        return result
```

### 14. Batch Processing (–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)

```python
async def batch_process(items, batch_size=5, task_template=None):
    results = []
    
    for i in range(0, len(items), batch_size):
        batch = items[i:i + batch_size]
        batch_task = f"""
        –û–±—Ä–∞–±–æ—Ç–∞–π —Å–ª–µ–¥—É—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
        {json.dumps(batch, ensure_ascii=False)}
        
        –î–ª—è –∫–∞–∂–¥–æ–≥–æ: {task_template}
        """
        
        agent = Agent(task=batch_task, llm=llm)
        batch_results = await agent.run()
        results.extend(batch_results)
        
        # –ü–∞—É–∑–∞ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏ –¥–ª—è rate limiting
        if i + batch_size < len(items):
            await asyncio.sleep(2)
    
    return results
```

### 15. Lazy Loading (–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)

```python
class LazyBrowserData:
    def __init__(self, url, llm):
        self.url = url
        self.llm = llm
        self._data = None
        self._loaded = False
    
    async def get(self, field):
        if not self._loaded:
            await self._load()
        
        if field not in self._data:
            # –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ–µ –ø–æ–ª–µ
            agent = Agent(
                task=f"–û—Ç–∫—Ä–æ–π {self.url} –∏ –∏–∑–≤–ª–µ–∫–∏ —Ç–æ–ª—å–∫–æ {field}",
                llm=self.llm
            )
            self._data[field] = await agent.run()
        
        return self._data[field]
    
    async def _load(self):
        # –ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–∑–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        agent = Agent(
            task=f"–û—Ç–∫—Ä–æ–π {self.url} –∏ –∏–∑–≤–ª–µ–∫–∏ –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é",
            llm=self.llm
        )
        self._data = await agent.run()
        self._loaded = True
```

---

## üéØ –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### –ú–∞—Ç—Ä–∏—Ü–∞ –≤—ã–±–æ—Ä–∞

| –°—Ç—Ä–∞—Ç–µ–≥–∏—è | –ü—Ä–æ—Å—Ç–æ—Ç–∞ | –ö–æ–Ω—Ç—Ä–æ–ª—å | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å |
|-----------|----------|----------|-------------------|------------------|
| Single Prompt | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê |
| Step-by-Step | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| Hybrid | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| Pipeline | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| Parallel | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| State Machine | ‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

**Single Prompt:**
- –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –†–∞–∑–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

**Step-by-Step:**
- –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º
- –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**Hybrid:**
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
- –ë–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è
- –†–∞–∑–Ω—ã–µ —Ñ–∞–∑—ã —Ä–∞–±–æ—Ç—ã

**Pipeline:**
- –°–±–æ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- ETL –ø—Ä–æ—Ü–µ—Å—Å—ã
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏

**Parallel:**
- –ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∑–∞–¥–∞—á–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

**State Machine:**
- –°–ª–æ–∂–Ω—ã–µ workflow
- –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ü—Ä–∏–º–µ—Ä: Airtable Registration (State Machine)

```python
class AirtableRegistration:
    def __init__(self, llm):
        self.llm = llm
        self.state = "INIT"
    
    async def run(self):
        # –®–∞–≥ 1: –û—Ç–∫—Ä—ã–≤–∞–µ–º Airtable
        task1 = "–û—Ç–∫—Ä–æ–π https://airtable.com/invite/r/xxx –∏ –¥–æ–∂–¥–∏—Å—å –∑–∞–≥—Ä—É–∑–∫–∏"
        agent1 = Agent(task=task1, llm=self.llm)
        await agent1.run()
        self.state = "OPENED"
        
        # –®–∞–≥ 2: –ü–æ–ª—É—á–∞–µ–º email
        task2 = """
        1. –û—Ç–∫—Ä–æ–π –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É
        2. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ temp-mail.io
        3. –°–∫–æ–ø–∏—Ä—É–π email –∞–¥—Ä–µ—Å
        """
        agent2 = Agent(task=task2, llm=self.llm)
        result = await agent2.run()
        self.state = "EMAIL_OBTAINED"
        
        # –®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É
        task3 = f"""
        1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Å—å –Ω–∞ –ø–µ—Ä–≤—É—é –≤–∫–ª–∞–¥–∫—É —Å Airtable
        2. –ó–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        3. –û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ä–º—É
        """
        agent3 = Agent(task=task3, llm=self.llm)
        await agent3.run()
        self.state = "COMPLETED"
        self.state = "OPENED"
        
        # –®–∞–≥ 2
        email = await self.get_temp_email()
        self.state = "EMAIL_OBTAINED"
        
        # –®–∞–≥ 3
        await self.fill_form(email)
        self.state = "FORM_SUBMITTED"
        
        # –®–∞–≥ 4
        await self.wait_for_confirmation()
        self.state = "COMPLETED"
```

### –ü—Ä–∏–º–µ—Ä: Price Comparison (Pipeline)

```python
pipeline = BrowserPipeline(llm)
pipeline.add_stage("search_ozon", "–ù–∞–π–¥–∏ —Ç–æ–≤–∞—Ä –Ω–∞ Ozon")
pipeline.add_stage("search_wb", "–ù–∞–π–¥–∏ —Ç–æ–≤–∞—Ä –Ω–∞ Wildberries")
pipeline.add_stage("compare", "–°—Ä–∞–≤–Ω–∏ —Ü–µ–Ω—ã")
results = await pipeline.run()
```

### –ü—Ä–∏–º–µ—Ä: Multi-tab Search (Parallel)

```python
async def search_all_engines(query):
    engines = ["yandex.ru", "google.com", "duckduckgo.com"]
    tasks = []
    
    for engine in engines:
        agent = Agent(
            task=f"–ù–∞–π–¥–∏ '{query}' –Ω–∞ {engine}",
            llm=llm
        )
        tasks.append(agent.run())
    
    return await asyncio.gather(*tasks)
```

---

## üìö –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö
1. –ù–∞—á–Ω–∏—Ç–µ —Å **Single Prompt** –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á
2. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ **Step-by-Step** –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Hybrid** –¥–ª—è –±–∞–ª–∞–Ω—Å–∞

### –î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö
1. **Pipeline** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö workflow
2. **State Machine** –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏
3. **Parallel** –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–ª—è production
1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Retry Strategy**
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ **Circuit Breaker** –¥–ª—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏
3. –î–æ–±–∞–≤—å—Ç–µ **Caching** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Monitoring** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

---

## üéì –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ - –∫–ª—é—á –∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞. –ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Å—Ç—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è–π—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

**–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞:**
- üéØ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –≤–∞–∂–Ω–µ–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- üõ°Ô∏è –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
- üìä –ò–∑–º–µ—Ä—è–π—Ç–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ
- üîÑ –ò—Ç–µ—Ä–∏—Ä—É–π—Ç–µ –∏ —É–ª—É—á—à–∞–π—Ç–µ
