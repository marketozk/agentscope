# üéâ PHASE 2 –ó–ê–í–ï–†–®–ï–ù–ê - –ü–û–õ–ù–ê–Ø –°–ê–ú–û–û–ë–£–ß–ê–Æ–©–ê–Ø–°–Ø –°–ò–°–¢–ï–ú–ê

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 19 –æ–∫—Ç—è–±—Ä—è 2025 –≥.  
**–§–∞–π–ª:** `test_agent3_air_selflearning.py` (2,763 —Å—Ç—Ä–æ–∫–∏)  
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** `selflearn_airtable.sqlite3` (SQLite)

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–ê–Ø –†–ê–ë–û–¢–ê

### PHASE 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∞)

| # | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç—Ä–æ–∫–∏ | –°—Ç–∞—Ç—É—Å |
|---|-----------|--------|--------|
| 1 | **SELF-LEARNING CORE** | 54-246 | ‚úÖ |
| 2 | **safe_screenshot()** | 336-353 | ‚úÖ |
| 3 | **save_registration_result()** | 366-395 | ‚úÖ |
| 4 | **main_airtable_registration_unified()** | 2506+ | ‚úÖ |

### PHASE 2: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê 19.10.2025)

| # | –§—É–Ω–∫—Ü–∏—è | –ê–¥–∞–ø—Ç–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|---|---------|-----------|--------|
| 5 | **switch_to_mail_tab** | –ü–∞—É–∑–∞: 300-1500ms | ‚úÖ |
| 6 | **switch_to_airtable_tab** | –ü–∞—É–∑–∞: 300-1500ms | ‚úÖ |
| 7 | **navigate** | –°—Ç—Ä–∞—Ç–µ–≥–∏–∏, —Ç–∞–π–º–∞—É—Ç—ã, —Å–µ–ª–µ–∫—Ç–æ—Ä—ã | ‚úÖ |
| 8 | **extract_email_from_tempmail_page** | –ú–µ—Ç–æ–¥—ã, –æ–∂–∏–¥–∞–Ω–∏–µ 8-20s | ‚úÖ |
| 9 | **extract_verification_link_from_page** | –ü–æ—Ä—è–¥–æ–∫ 5 –º–µ—Ç–æ–¥–æ–≤ | ‚úÖ |

---

## üß† –°–ò–°–¢–ï–ú–ê –°–ê–ú–û–û–ë–£–ß–ï–ù–ò–Ø

### –û–±—É—á–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (15+)

1. **screenshot_timeout_ms** - —Ç–∞–π–º–∞—É—Ç—ã —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –ø–æ –¥–æ–º–µ–Ω–∞–º
2. **tab_switch_wait_ms** - –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
3. **nav_strategy** - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (domcontentloaded/load/minimal)
4. **nav_after_wait_ms** - –ø–∞—É–∑–∞ –ø–æ—Å–ª–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
5. **selector_timeout_ms** - —Ç–∞–π–º–∞—É—Ç—ã –æ–∂–∏–¥–∞–Ω–∏—è —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
6. **pre_nav_pause_ms** - –ø–∞—É–∑–∞ –ø–µ—Ä–µ–¥ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
7. **nav_minimal_wait_ms** - –≤—Ä–µ–º—è –¥–ª—è minimal —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
8. **email_initial_wait_ms** - –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è email
9. **email_extract_method** - –º–µ—Ç–æ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è email
10. **verify_extract_order** - –ø–æ—Ä—è–¥–æ–∫ –º–µ—Ç–æ–¥–æ–≤ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏
11. **verify_extract_regex** - —É—Å–ø–µ—à–Ω–æ—Å—Ç—å regex –º–µ—Ç–æ–¥–∞
12. **verify_extract_js_links** - —É—Å–ø–µ—à–Ω–æ—Å—Ç—å JS –º–µ—Ç–æ–¥–∞
13. **verify_extract_selector** - —É—Å–ø–µ—à–Ω–æ—Å—Ç—å selector –º–µ—Ç–æ–¥–∞
14. **verify_click_then_regex** - —É—Å–ø–µ—à–Ω–æ—Å—Ç—å click+regex
15. **verify_click_then_js** - —É—Å–ø–µ—à–Ω–æ—Å—Ç—å click+JS

### –ê–ª–≥–æ—Ä–∏—Ç–º –æ–±—É—á–µ–Ω–∏—è

**Epsilon-greedy (Œµ = 0.12)**

- **Exploitation (88%)**: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª—É—á—à–∏–π –∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
- **Exploration (12%)**: –ü—Ä–æ–±—É–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

**–§–æ—Ä–º—É–ª–∞ reward:**
```
reward = success_rate - 0.25 * (avg_time_ms / 5000)
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞:**
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (%)
- –°–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (ms)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ (n)

---

## üìä –¢–ï–ö–£–©–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

```
=== –ó–ê–ü–£–°–ö–ò ===
Run #1: unified | failed | verified=True | 0ms

=== –î–ï–ô–°–¢–í–ò–Ø ===
25 –¥–µ–π—Å—Ç–≤–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
25 —É—Å–ø–µ—à–Ω—ã—Ö (100%)

=== –¢–û–ü –ü–ê–†–ê–ú–ï–¢–†–û–í ===
screenshot_timeout_ms:
  airtable.com  | 6000ms  | n=4 ‚úÖ=4 (100%) avg=130ms
  airtable.com  | 8000ms  | n=4 ‚úÖ=4 (100%) avg=103ms
  temp-mail.org | 12000ms | n=3 ‚úÖ=3 (100%) avg=131ms
  temp-mail.org | 15000ms | n=2 ‚úÖ=2 (100%) avg=177ms
```

### –£–∂–µ –æ–±—É—á–∞–µ—Ç—Å—è

1. ‚úÖ –¢–∞–π–º–∞—É—Ç—ã —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
2. ‚úÖ 14 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –±–∞–∑–µ
3. ‚úÖ 100% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

---

## üöÄ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### –ó–∞–ø—É—Å–∫ —Å –æ–±—É—á–µ–Ω–∏–µ–º

```bash
..\.venv\Scripts\python.exe test_agent3_air_selflearning.py
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```bash
..\.venv\Scripts\python.exe analyze_learning.py
```

### –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ exploration

```bash
# –£–º–µ–Ω—å—à–∏—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ 10+ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤
set AUTOLEARN_EPS=0.05
..\.venv\Scripts\python.exe test_agent3_air_selflearning.py
```

### –°–±—Ä–æ—Å –æ–±—É—á–µ–Ω–∏—è

```bash
del selflearn_airtable.sqlite3
```

---

## üìà –û–ñ–ò–î–ê–ï–ú–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### –ü–æ—Å–ª–µ 5-10 –∑–∞–ø—É—Å–∫–æ–≤

1. **–°–∫–æ—Ä–æ—Å—Ç—å** ‚Üí +20-30% (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–∞–π–º–∞—É—Ç–æ–≤)
2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** ‚Üí +15-25% (–≤—ã–±–æ—Ä –ª—É—á—à–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π)
3. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** ‚Üí –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∞–π—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä—ã –∞–¥–∞–ø—Ç–∞—Ü–∏–∏

- **temp-mail.org**: –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è email (12-15s)
- **airtable.com**: –õ—É—á—à–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (domcontentloaded vs load)
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫**: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç regex –Ω–∞–¥ JS (–±—ã—Å—Ç—Ä–µ–µ –Ω–∞ 2000ms)

---

## üîç –ú–û–ù–ò–¢–û–†–ò–ù–ì

### SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

```sql
-- –í—Å–µ –∑–∞–ø—É—Å–∫–∏
SELECT * FROM runs ORDER BY id DESC;

-- –¢–æ–ø –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
SELECT key, context, value, n, success, 
       ROUND(tot_ms*1.0/n, 0) as avg_ms
FROM params 
ORDER BY n DESC LIMIT 20;

-- –î–µ–π—Å—Ç–≤–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞
SELECT step, action, domain, success, duration_ms
FROM actions
WHERE run_id = (SELECT MAX(id) FROM runs)
ORDER BY step;

-- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –º–µ—Ç–æ–¥–æ–≤ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è email
SELECT value, n, success, 
       ROUND(100.0*success/n, 1) as success_rate
FROM params
WHERE key = 'email_extract_method'
ORDER BY success_rate DESC;
```

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
Browser_Use/
‚îú‚îÄ‚îÄ test_agent3_air_selflearning.py  (2763 —Å—Ç—Ä–æ–∫–∏) - –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ selflearn_airtable.sqlite3        (24KB)       - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ analyze_learning.py               (72 —Å—Ç—Ä–æ–∫–∏)  - –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îú‚îÄ‚îÄ GPT5_RESPONSE_FULL.md            (50KB)       - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è GPT-5
‚îú‚îÄ‚îÄ PHASE2_COMPLETE_REPORT.md        (—ç—Ç–æ—Ç —Ñ–∞–π–ª)  - –û—Ç—á–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
‚îî‚îÄ‚îÄ logs/                                          - –õ–æ–≥–∏ –∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã
```

---

## üéØ ROADMAP

### ‚úÖ Phase 1 - –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (DONE)
- SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –ö–ª–∞—Å—Å SelfLearnStore
- –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ Phase 2 - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (DONE)
- Navigate —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- Tab switching
- Email/Link extraction
- Screenshot timeouts

### üîú Phase 3 - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –û–Ω–±–æ—Ä–¥–∏–Ω–≥ Airtable (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ Cloudflare (–µ—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è)
- [ ] Multi-domain –æ–±—É—á–µ–Ω–∏–µ
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ –≤ JSON/CSV

---

## üí° –°–û–í–ï–¢–´

1. **–ü–µ—Ä–≤—ã–µ 5 –∑–∞–ø—É—Å–∫–æ–≤** - —Å–∏—Å—Ç–µ–º–∞ –∏–∑—É—á–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
2. **–ü–æ—Å–ª–µ 10 –∑–∞–ø—É—Å–∫–æ–≤** - —É–º–µ–Ω—å—à–∏—Ç–µ epsilon –¥–æ 0.05
3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –Ω–æ–≤—ã–º —Å–∞–π—Ç–æ–º** - —Å–∏—Å—Ç–µ–º–∞ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∑–∞ 2-3 –ø–æ–ø—ã—Ç–∫–∏
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `analyze_learning.py` —Ä–µ–≥—É–ª—è—Ä–Ω–æ
5. **–ë—ç–∫–∞–ø –ë–î** - –∫–æ–ø–∏—Ä—É–π—Ç–µ `selflearn_airtable.sqlite3` –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏

---

## üéâ –ò–¢–û–ì

**–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∞–º–æ–æ–±—É—á–∞—é—â–∞—è—Å—è —Å–∏—Å—Ç–µ–º–∞** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ Airtable:

- ‚úÖ 9/9 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ 15+ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–±—É—á–∞—é—Ç—Å—è
- ‚úÖ Epsilon-greedy –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- ‚úÖ –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ —É—Å–ø–µ—à–µ–Ω (100% –¥–µ–π—Å—Ç–≤–∏–π)
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–ø—É—Å—Ç–∏—Ç—å 5-10 —Ä–∞–∑ –¥–ª—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ —É–ª—É—á—à–µ–Ω–∏–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π!
